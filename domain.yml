version: "3.1"

intents:
  - greet
  - goodbye
  - affirm
  - deny
  - give_competition
  - give_api_section
  - give_team_stat_type
#  - request_standings_info
#  - request_team_stats_info
  # - request_...
  - give_season
  - give_round
  - give_team
  - give_player
  # - give_...
  - interrupt_form
  - bot_challenge


entities:
  - competition
  - api_section
  - team_stat_type
  - season
  - round
  - team
  - player


actions:
  - action_return_requested_standings
  - action_return_teams_available
  - action_return_requested_team_stats_all
  - action_return_requested_team_stats_single_season
  - action_return_requested_player_stats_all


slots:

  competition:
    type: text
    # influence_conversation: true
    mappings:
      - type: from_entity
        entity: competition
  
  api_section:
    type: categorical
    influence_conversation: true
    values:
      - Standings
      - Team Stats
      - Player Stats
      - Game Stats
      # - other_categories (in API)
    mappings:
      - type: from_entity
        entity: api_section

  team_stat_type:
    type: categorical
    influence_conversation: true
    values:
      - single season
      - all seasons
    mappings:
      - type: from_entity
        entity: team_stat_type

  season:
    type: float
    min_value: 2000.0
    max_value: 2023.0
    # influence_conversation: true
    mappings:
      - type: from_entity
        entity: season
        conditions:
          - active_loop: standings_form
      - type: from_entity
        entity: season
        conditions:
          - active_loop: team_stats_single_season_form

  round:
    type: float
    min_value: 0.0
    max_value: 34.0
    # influence_conversation: true
    mappings:
      - type: from_entity
        entity: round
        conditions:
          - active_loop: standings_form

  team:
    type: text
    # influence_conversation: true
    mappings:
      - type: from_entity
        entity: team
        conditions:
          - active_loop: team_stats_all_form
      - type: from_entity
        entity: team
        conditions:
          - active_loop: team_stats_single_season_form

  player:
    type: text
    mappings:
      - type: from_entity
        entity: player
        conditions:
         - active_loop: player_stats_all_form




#  name:
#    type: text
#    mappings:
#      - type: from_entity
#        entity: name
#
#  amount:
#    type: text
#    mappings:
#      - type: from_entity
#        entity: amount
#
#  home_team:
#    type: text
#    influence_conversation: true
#    mappings:
#      - type: from_entity
#        entity: home_team
#        # To change the slot value just when the form is active (avoid changing when unnecessary)
#        conditions:
#        - active_loop: game_metadata_form
#
#  away_team:
#    type: text
#    influence_conversation: true
#    mappings:
#      - type: from_entity
#        entity: away_team
#        conditions:
#        - active_loop: game_metadata_form


forms:
  standings_form:
    # "If you do not want any of the required slots of a form to be filled when the intent is one from the list"
    # ignored_intents:
    # intent_1
    required_slots:
      # - competition
      - season
      - round
  
  team_stats_all_form:
    required_slots:
      # - team_stats_type
      - team

  team_stats_single_season_form:
    required_slots:
      - team
      - season

  player_stats_all_form:
    required_slots:
      - player


responses:
  utter_greet:
  - text: "Hey! I am a bot that can help you with Euroleague and Eurocup information. Which competition do you want to know about?"

  utter_which_api:
  - text: "{competition} it is! What do you want to know about it, Standings, Team Stats, Player Stats or Game Stats?"

  utter_which_team_stat_type:
  - text: "Which team stat type do you want to check, single season or all seasons?"

  # utter_season:
  # utter_ask_<form_name>_<slot_name>
  utter_ask_standings_form_season:
  - text: "Which season do you want to know about? Just write the year the season starts. For example, 2023 for the last season."

  # utter_round:
  # utter_ask_<form_name>_<slot_name>
  utter_ask_standings_form_round:
  - text: "Which round do you want to know about? **Limitation**: Depending on the season and competition, the number of rounds may vary."

  utter_ask_player_stats_all_form_player:
  - text: "Which player do you want the stats of? Just in {competition}."

  # utter_team:
  # utter_ask_<form_name>_<slot_name>
  utter_ask_team_stats_all_form_team:
  - text: "Which team do you want the stats of?"

  # utter_ask_<form_name>_<slot_name>
  utter_ask_team_stats_single_season_form_team:
  - text: "Which team do you want the stats of?"

  # utter_ask_<form_name>_<slot_name>
  utter_ask_team_stats_single_season_form_season:
  - text: "Which season do you want to know about? Just write the year the season starts. For example, 2023 for the last season."

  utter_goodbye:
  - text: "Bye"

  utter_ask_interrupt_form:
  - text: "Are you sure you want to interrupt the current query?"

  utter_iamabot:
  - text: "I am a bot, powered by Rasa."


session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
